.TH SLEEPD 8
.SH NAME
sleepd \- puts a laptop to sleep during inactivity or on low battery
.SH SYNOPSIS
.B sleepd
.I "[-s command] [-d command] [-u n] [-U n] [-i n] [-E] [-e filename] [-a] [-l n] [-w] [-n] [-c n] [-b n] [-A]"
.SH DESCRIPTION
.BR sleepd
is a daemon to force laptops to go to sleep after some period of
inactivity. This is useful if your laptop does not automatically go to
sleep when you aren't using it, and, like me, you often forget to shut it
off. It is also capable of suspending a laptop when its battery gets very
low.
.P
.BR sleepd
polls event devices to detect when your laptop is
in use. It defaults to polling /dev/input/event* for keyboard and mouse
activity. You may specify a list of device files to poll instead. After
a configurable amount of time with no activity on these devices, it asks
.BR apm (1)
or some user-defined program to put the laptop to sleep.
.SH OPTIONS
.TP
.B \-h, \-\-help
Show summary of options.
.TP
.B \-n, \-\-nodaemon
Don't fork to background; run in forground.
.TP
.B \-u, \-\-unused
Number of seconds the laptop can remain idle before being put to sleep.
Defaults to 600 secods (10 minutes). Set to 0 to disable any sleeping due
to idleness.
.TP
.B \-U, \-\-ac-unused
If set, controls the number of seconds the laptop can remain idle before
being put to sleep when running on AC power. If not set, the laptop will
not sleep when it's on AC power.
.TP
.B \-e, \-\-event
Adds an event file to the list that is watched. Using this switch disables
polling all files in /dev/input/event*.
.TP
.B \-E, \-\-no-events
This switch disables event device polling. You will probably want to enable
the irq method with -a and/or -i.
.TP
.B \-l, \-\-load
If set, a load average higher than this number will prevent the computer
from sleeping If not set, the computer will ignore the load average.
.TP
.B \-w
If set, sleepd will also check idletime based on utmp. This will prevent
the system from sleeping while remote connections are active. It uses the
time limit from \-u.
.TP
.B \-i, \-\-irq
Adds an irq to the list that is watched. Using this switch disables
automatic detection of keyboard and mouse irqs unless -a is specified as
well.
.TP
.B \-a, \-\-auto
Automatically detect and watch mouse and keyboard irqs.
.TP
.B \-s, \-\-sleep-command
Command to run to put the laptop to sleep. Defaults to "apm -s" for systems
with apm and "hibernate --force" for systems with ACPI.
.TP
.B \-b, \-\-battery
If this option is specified, the daemon will put the laptop to sleep if the
percentage of battery charge drops below the specified number and the system
is off AC power. This is useful for some laptops which don't handle this
themselves. It supports using APM, ACPI, and HAL for querying battery status.
.TP
.B \-d, \-\-hibernate-command
A command to run instead of the regular sleep command when the battery is
low. This can be useful if you want to make the system go to sleep when
it's not active, but suspend to disk if the battery is low. If not set, the
sleep command is used.
.TP
.B \-A, \-\-and
Only go to sleep if all specified conditions are met. For example, only
sleep if idle and if the battery is low.
.TP
.B \-c, \-\-check-period
Number of seconds between check on system status. Defaults to 10
seconds, which should be fine generally.
.SH "SEE ALSO"
.BR sleepctl (1), apm (1)
.P
.B http://kitenet.net/~joey/code/sleepd/
.SH BUGS
Interrupt monitoring cannot always detect keyboard and mouse.
If the keyboard or mouse interrupt is shared (as is common with usb
devices), other devices on the same interrupt can keep the system awake.
Use event device polling instead.
.SH AUTHOR
Joey Hess <joey@kitenet.net>
